# リスク判断票

リスク表は単なる一覧ではなく：

「判断を減らす装置」

重要なのは：

	•	事象 → 構造
	•	事故 → 制御点不足
	•	対応 → 再発防止設計

に変換できる構造を持つこと。

## 目的

 	•	属人判断を減らす
	•	初動のばらつきを抑える
	•	影響度と優先度を即時判断できるようにする
	•	再発防止（構造対策）に接続できる

## 基本フォーマット

```
# リスク分類表

## 1. 基本情報
| 項目 | 内容 |
|------|------|
| リスクID | R-xxx |
| カテゴリ | 技術 / 運用 / セキュリティ / 組織 / 外部依存 |
| 発生日 | YYYY/MM/DD |
| 発見者 | |
| 関連サービス | Jenkins / Nexus / GitHub / EKS 等 |

---

## 2. リスク内容
| 項目 | 内容 |
|------|------|
| 事象概要 | 何が起きうるか |
| 想定シナリオ | どういう条件で顕在化するか |
| 発生確率 | 高 / 中 / 低 |
| 影響度 | 高 / 中 / 低 |
| リスクレベル | (確率×影響度で算出) |

---

## 3. 影響範囲
| 観点 | 影響 |
|------|------|
| 可用性 | |
| 性能 | |
| データ整合性 | |
| セキュリティ | |
| ユーザ影響 | |

---

## 4. 現状の制御点（Control）
| 制御種別 | 内容 |
|----------|------|
| 予防制御 | |
| 検知制御 | |
| 影響緩和制御 | |

---

## 5. 対応方針
| 項目 | 内容 |
|------|------|
| 優先度 | P1/P2/P3 |
| 暫定対応 | |
| 恒久対応 | |
| 担当 | |
| 期限 | |

---

## 6. 再発防止構造
| 観点 | 内容 |
|------|------|
| 原因種別 | 特別原因 / 共通原因 |
| 仕組み変更 | |
| 監視追加 | |
| Runbook更新 | |
```

# CI基盤向け

```
## リスクカテゴリ体系（CI基盤）

1. インフラ層
   - ノード障害
   - OOM
   - ディスク枯渇
   - ネットワーク断

2. アプリ層
   - Jenkins Queue停滞
   - Nexus Blob破損
   - GitHub Webhook失敗

3. データ層
   - Artifact消失
   - DB破損
   - バックアップ不整合

4. セキュリティ層
   - 証明書失効
   - トークン漏洩
   - 権限誤設定

5. 外部依存
   - GitHub SaaS障害
   - AWS障害
   - 外部レジストリ停止

6. 運用設計
   - 監視未設定
   - Runbook未整備
   - 属人対応
```

# リスク評価マトリクス

```
## リスク評価基準

### 発生確率
| レベル | 定義 |
|--------|------|
| 3 | 月1回以上 |
| 2 | 半年に1回程度 |
| 1 | 年1回未満 |

### 影響度
| レベル | 定義 |
|--------|------|
| 3 | 全社停止 / データ損失 |
| 2 | 部分停止 / ビルド不可 |
| 1 | 軽微影響 |

リスクスコア = 確率 × 影響度
```

# サンプル（Jenkins OOM例）

```
# R-012 Jenkins Master OOM

カテゴリ: インフラ層

事象概要:
Jenkins Masterがメモリ枯渇によりOOM Killされる

想定シナリオ:
- 同時ビルド数増加
- メモリリーク
- Heap設定不備

発生確率: 2
影響度: 3
リスクスコア: 6 (高)

影響:
- 全ビルド停止
- Queue滞留
- SLA違反

制御:
予防: -Xmx制御 / Pod制限設定
検知: Memory使用率80% Alert
緩和: 自動再起動

対応:
暫定: 再起動
恒久: HeapDump分析 + 同時実行制御

再発防止:
共通原因 → 容量設計未定義
→ Capacity設計ドキュメント追加
```